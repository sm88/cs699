<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title> Gnuplot 4.2 Tutorial </title>
<meta name="keywords" value="Gnuplot, gnuplot, Gnuplot, gnuplot, Gnuplot, GNUPLOT, gnuplot, Gnuplot, GNUPLOT, gnuplot, GNUPLOT, gnuplot, GNUPLOT, gnuplot">
</head>
<body bgcolor="#FFFFF2">

<p><img src="gnuplot-gavin_files/psoe.jpg" align="left" border="1">
<b><font face="Arial, Helvetica, sans-serif" size="4">
<nobr> GNUPLOT 4.2 - A Brief Manual and Tutorial</nobr></font></b><font face="Arial, Helvetica, sans-serif" size="4"><br>
<a href="http://cee.duke.edu/">
Department of Civil and Environmental Engineering</a><br>
<a href="http://pratt.duke.edu/">
Edmund T. Pratt School of Engineering</a><br>
<a href="http://www.duke.edu/">
Duke University</a> - Box 90287,
<a href="http://www.durham-nc.com/"> Durham</a>,
<a href="http://www.visitnc.com/"> NC</a> 27708-0287
</font>
</p>

<br>
<hr>

<b>1. INSTALLING AND STARTING <a href="http://www.gnuplot.info/">GNUPLOT  -  version 4.2</a></b>
      
<p>
<a href="http://www.gnuplot.info/">Gnuplot</a>
is a free, command-driven, interactive, function and data plotting program.  
<a href="http://sourceforge.net/project/showfiles.php?group_id=2055">
Pre-compiled executeables</a>
and 
<a href="http://sourceforge.net/project/showfiles.php?group_id=2055">
source code </a>
for Gnuplot 4.2.4 may be downloaded for 
<a href="http://gnuplot.darwinports.com/">OS X</a>,
<a href="http://downloads.sourceforge.net/gnuplot/gp424win32.zip">Windows</a>,
<a href="http://downloads.sourceforge.net/gnuplot/gp424os2.zip">OS2</a>, 
<a href="http://downloads.sourceforge.net/gnuplot/gp424dj2.zip">DOS</a>, and
<a href="http://linuxappfinder.com/package/gnuplot">Linux</a>.  
The enhancements provided by version 4.2 are described 
<a href="http://www.gnuplot.info/docs/node6.html">here</a>.
</p>

<p>
On Windows, unzip gp424win32.zip into an appropriate directory,
(e.g.  C:\My Programs\Gnuplot, C:\Gnuplot, C:\Apps\gnuplot, etc.).
          
Make a link from ...\gnuplot\bin\wgnuplot.exe to your desktop or some
other convenient location.
          
Click on this link, and the Gnuplot window should open.
</p>

<p>
Instructions for installing on OS X are <a href="http://gnuplot.darwinports.com/">here</a>.
</p>


<p>
On Unix, Linux and OS X systems start Gnuplot by simply opening a terminal and typing:  </p><pre> gnuplot  </pre>
<p></p>

<p>
For help on any topic type  <b>help</b>  followed by the name of the topic.
Full documentation is provided <a href="http://www.gnuplot.info/docs/gnuplot.html"> here.</a><br>
<!--
If you want to try out Gnuplot without downloading it first, you can use this 
<a href="http://www.tipjar.com/rcgi/gnuplot/2dplotter">web-enabled Gnuplot interface</a>.  
-->

</p><hr>

<b>2. FUNCTIONS                                                </b>

<p>
In general, any mathematical expression accepted by C, FORTRAN, Pascal,
or BASIC may be plotted.  The precedence of operators is determined by the
specifications of the C programming language. 

</p><p>
The supported functions include:

</p><pre>      __________________________________________________________
      Function            Returns
      -----------      ------------------------------------------
      abs(x)            absolute value of x, |x|
      acos(x)           arc-cosine  of x
      asin(x)           arc-sine    of x  
      atan(x)           arc-tangent of x
      cos(x)            cosine      of x,  x is in radians.
      cosh(x)           hyperbolic cosine of x, x is in radians
      erf(x)            error function of x
      exp(x)            exponential function of x, base e
      inverf(x)         inverse error function of x
      invnorm(x)        inverse normal distribution of x
      log(x)            log of x, base e
      log10(x)          log of x, base 10
      norm(x)           normal Gaussian distribution function
      rand(x)           pseudo-random number generator      
      sgn(x)            1 if x &gt; 0, -1 if x &lt; 0, 0 if x=0
      sin(x)            sine      of x, x is in radians
      sinh(x)           hyperbolic sine of x, x is in radians
      sqrt(x)           the square root of x
      tan(x)            tangent of x, x is in radians
      tanh(x)           hyperbolic tangent of x, x is in radians
      ___________________________________________________________
      Bessel, gamma, ibeta, igamma, and lgamma functions are also
      supported.  Many functions can take complex arguments.
      Binary and unary operators are also supported.  
</pre>

<p>
The supported operators in Gnuplot are the same as the corresponding
operators in the C programming language, except that most operators
accept integer, real, and complex arguments.   The ** operator
(exponentiation) is supported as in FORTRAN.  Parentheses may be used
to change the order of evaluation.  The variable names x, y, and z are
used as the default independent variables.  

</p><hr>
      
<p>
<b>3. THE  plot  AND  splot  COMMANDS                              </b>
            
</p><p>
<b>plot</b>  and  <b>splot</b>  are the primary commands in Gnuplot.  They plot
functions and data in many many ways.  <b>plot</b>  is used to plot 2-d 
functions and data, while  <b>splot</b>  plots 3-d surfaces and data.

</p><pre>Syntax:
       plot {[ranges]}
            {[function] | {"[datafile]" {datafile-modifiers}}}
            {axes [axes] } { [title-spec] } {with [style] }
            {, {definitions,} [function] ...}
</pre>

<p>
where either a [function] or the name of a data file enclosed in quotes
is supplied.   For more complete descriptions, type:  help plot  
help plot with      help plot using    or    help plot smooth .

</p><p>
<b>3.1 Plotting Functions        </b>

</p><p>
To plot functions simply type:  plot [function]  at the  gnuplot&gt;  prompt.

</p><p>
For example, try:

</p><pre>      gnuplot&gt;  plot sin(x)/x   
      gnuplot&gt;  splot sin(x*y/20)
      gnuplot&gt;  plot sin(x) title 'Sine Function', tan(x) title 'Tangent'
</pre>

<p>
<b>3.2 Plotting Data      </b>

</p><p>
Discrete data contained in a file can be displayed by specifying the name
of the data file (enclosed in quotes) on the  
<b>plot</b>  or  <b>splot</b>  
command line.  Data files should have the data arranged in columns of
numbers.  Columns should be separated by white space (tabs or spaces)
only, (no commas).  Lines beginning with a  #  character are treated
as comments and are ignored by Gnuplot.  A blank line in the data file
results in a break in the line connecting data points.  

</p><p>
For example your data file,  force.dat , might look like:

</p><pre>      # This file is called   force.dat
      # Force-Deflection data for a beam and a bar
      # Deflection    Col-Force       Beam-Force 
      0.000              0              0    
      0.001            104             51
      0.002            202            101
      0.003            298            148
      0.0031           290            149
      0.004            289            201
      0.0041           291            209
      0.005            310            250
      0.010            311            260
      0.020            280            240
</pre>


<p>
You can display your data by typing:
</p><pre>      gnuplot&gt;  plot  "force.dat" using 1:2 title 'Column', \
                      "force.dat" using 1:3 title 'Beam'
</pre>

<p>
Do not type blank space after the line continuation character, "\"  .</p>

Your data may be in multiple data files.  In this case you may make
your plot by using a command like:
<pre>      gnuplot&gt;  plot  "fileA.dat" using 1:2 title 'data A', \
                      "fileB.dat" using 1:3 title 'data B'
</pre>

For information on plotting 3-D data, type:  
<pre>      gnuplot&gt;  help splot datafile
</pre>


<hr>

<p>
<b>4. CUSTOMIZING YOUR PLOT                                    </b>

</p><p>
Many items may be customized on the plot, such as the ranges of the
axes, the labels of the x and y axes, the style of data point, the
style of the lines connecting the data points, and the title of the 
entire plot.

</p><p>
<b> 4.1  plot  command customization            </b>

</p><p>
Customization of the data columns, line titles, and line/point style
are specified when the <b>plot</b>  command is issued.  Customization of the
data columns and line titles were discussed in section 3.  

</p><p>
Plots may be displayed in one of eight styles: 
lines, points, linespoints, impulses, dots, steps, fsteps, histeps,
errorbars, xerrorbars, yerrorbars, xyerrorbars, boxes, boxerrorbars,
boxxyerrorbars, financebars, candlesticks or vector
To specify the line/point style use the <b>plot</b>  command as follows:

</p><pre>      gnuplot&gt; plot "force.dat" using 1:2 title 'Column' with lines, \
                    "force.dat" u 1:3 t 'Beam' w linespoints
</pre>

<p>
Note that the words:  using  ,  title  , and  with  can be abbreviated
as:  u  ,  t  , and  w  .  Also, each line and point style has an 
associated number.  

</p><p>
<b> 4.2   set  command customization             </b>

</p><p>
Customization of the axis ranges, axis labels, and plot title, as
well as many other features, are specified using the  set  command. 
Specific examples of the  set  command follow.  (The numerical values
used in these examples are arbitrary.)  To view your changes
type:  replot  at the  gnuplot&gt;  prompt at any time.

</p><pre>      Create a title:                  &gt; set title "Force-Deflection Data" 
      Put a label on the x-axis:       &gt; set xlabel "Deflection (meters)"
      Put a label on the y-axis:       &gt; set ylabel "Force (kN)"
      Change the x-axis range:         &gt; set xrange [0.001:0.005]
      Change the y-axis range:         &gt; set yrange [20:500]
      Have Gnuplot determine ranges:   &gt; set autoscale
      Move the key:                    &gt; set key 0.01,100
      Delete the key:                  &gt; unset key
      Put a label on the plot:         &gt; set label "yield point" at 0.003, 260 
      Remove all labels:               &gt; unset label
      Plot using log-axes:             &gt; set logscale
      Plot using log-axes on y-axis:   &gt; unset logscale; set logscale y 
      Change the tic-marks:            &gt; set xtics (0.002,0.004,0.006,0.008)
      Return to the default tics:      &gt; unset xtics; set xtics auto
</pre>

<p>
Other features which may be customized using the set command are:
arrow, border, clip, contour, grid, mapping, polar, surface, time,
view, and many more.  The best way to learn is by reading the 
on-line help information, trying the command, and reading the
<a href="http://www.ucc.ie/gnuplot/gnuplot.html">Gnuplot manual</a>. 
You may also post questions to the newsgroup  <i>comp.graphics.apps.gnuplot </i>  
</p><p>
The <a href="http://chem.skku.ac.kr/%7Ewkpark/tutor/gnuplot/gpdocs/">Gnuplot demo page</a> and the <a href="http://www.cs.uni.edu/Help/gnuplot/">gnuplot intro page</a> have many examples like 
this <a href="http://www.duke.edu/%7Ehpgavin/ce283/Hs.html">script for a transfer function</a> producing this <a href="http://www.duke.edu/%7Ehpgavin/ce283/Hs.ps">postscript plot</a>. 

</p><hr>

<p>
<b>5. PLOTTING DATA FILES WITH OTHER COMMENT CHARACTERS                  </b>

</p><p>
If your data file has a comment character other than  #  you can 
tell Gnuplot about it. 
For example, if your data file has "%" comment characters (for Matlab
compatability), typing 
</p><pre>      gnuplot&gt;  set datafile commentschars "#%"
</pre>
indicates that either a "#" or a "%" character starts a comment.    

<hr>

<p>
<b>6. GNUPLOT SCRIPTS                                          </b>

</p><p>
Sometimes, several commands are typed to create a particular plot, and it
is easy to make a typographical error when entering a command.  To stream-
line your plotting operations, several Gnuplot commands may be combined
into a single script file.  For example, the following file will create a
customized display of the force-deflection data:

</p><pre>      # Gnuplot script file for plotting data in file "force.dat"
      # This file is called   force.p
      set   autoscale                        # scale axes automatically
      unset log                              # remove any log-scaling
      unset label                            # remove any previous labels
      set xtic auto                          # set xtics automatically
      set ytic auto                          # set ytics automatically
      set title "Force Deflection Data for a Beam and a Column"
      set xlabel "Deflection (meters)"
      set ylabel "Force (kN)"
      set key 0.01,100
      set label "Yield Point" at 0.003,260
      set arrow from 0.0028,250 to 0.003,280
      set xr [0.0:0.022]
      set yr [0:325]
      plot    "force.dat" using 1:2 title 'Column' with linespoints , \
            "force.dat" using 1:3 title 'Beam' with points
</pre>

<p>
Then the total plot can be generated with the command:
      gnuplot&gt;  load 'force.p'
</p>

<img src="gnuplot-gavin_files/force.gif" border="1">

<hr>

<p>
<b>7. CURVE-FITTING WITH GNUPLOT                              </b>

</p><p>
To fit the data in  force.dat  with a function use the commands:

</p><pre>      f1(x) = a1*tanh(x/b1)            # define the function to be fit
      a1 = 300; b1 = 0.005;            # initial guess for a1 and b1
      fit f1(x) 'force.dat' using 1:2 via a1, b1

Final set of parameters            Asymptotic Standard Error
=======================            ==========================
a1      = 308.687                  +/- 10.62         (3.442%)
b1      = 0.00226668               +/- 0.0002619     (11.55%)
</pre>

<p>
and the commands:

</p><pre>      f2(x) = a2 * tanh(x/b2)            # define the function to be fit
      a2 = 300; b2 = 0.005;            # initial guess for a and b
      fit f2(x) 'force.dat' using 1:3 via a2, b2

Final set of parameters            Asymptotic Standard Error
=======================            ==========================
a2      = 259.891                  +/- 12.82         (4.933%)
b2      = 0.00415497               +/- 0.0004297     (10.34%)
</pre>

<p>
The curve-fit and data may now be plotted with the commands:

</p><pre>set key 0.018,150 title "F(x) = A tanh (x/B)"             # title to key!
set title "Force Deflection Data \n and curve fit"      # note newline!
set pointsize 1.5                              # larger point!
set xlabel 'Deflection, {/Symbol D}_x (m)'            # Greek symbols!
set ylabel 'Force, {/Times-Italic F}_A, (kN)'            # italics!

plot    "force.dat" using 1:2 title 'Column data' with points 3, \
      "force.dat" using 1:3 title 'Beam data'   with points 4, \
      a1 * tanh( x / b1 ) title 'Column-fit: A=309, B=0.00227', \
      a2 * tanh( x / b2 ) title 'Beam-fit: A=260, B=0.00415'
</pre>

<img src="gnuplot-gavin_files/force-fit.gif" border="1">

<hr>

<p>
<b>8. SPREAD-SHEET LIKE CALCULATIONS ON DATA                        </b>

</p><p>
Gnuplot can mathematically modify your data column by column:

</p><p>
to plot sin( col.3 + col.1 )  vs.  3 * col.2    type:

</p><pre>        plot 'force.dat' using  (3*$2):(sin($3+$1))
</pre>

<hr>

<p>
<b>9. MULTI-PLOT                                          </b>

</p><p>
Gnuplot can plot more than one figure in a frame ( like subplot in matlab )
i.e., try:

</p><pre>      set multiplot;                          # get into multiplot mode
      set size 1,0.5;  
      set origin 0.0,0.5;   plot sin(x); 
      set origin 0.0,0.0;   plot cos(x)
      unset multiplot                         # exit multiplot mode
</pre>

<hr>

<p>
<b>10. GNUPLOT DEMO FILES AND THE GNUPLOT FAQ               </b>

</p><p>
Most of Gnuplot's current features are illustrated in
one or more of the
<a href="http://gnuplot.sourceforge.net/demo_4.2/">Gnuplot demonstration files</a>.
To run the demo's yourself, download and unzip 
<a href="http://www.duke.edu/%7Ehpgavin/demo.zip">demo.zip</a>,
start Gnuplot from the resulting demo directory, and type
</p><pre>       load "all.dem"
</pre>
The Gnuplot feature you are looking for will probably be illustrated 
in one of the demo files.  

Gnuplot 4.2 also has an extensive
<a href="http://www.gnuplot.info/faq/faq.html">FAQ</a>.

<hr>

<p>
<b>11. HARD-COPY (PLOTTING ON PAPER)                              </b>

</p><p>
You can create a PostScript file of your plot by using the following
files and commands.  First, download and save the following general-purpose Gnuplot script: 
<a href="http://www.duke.edu/%7Ehpgavin/save.plt">save.plt</a>

</p><pre>
     # File name: save.plt - saves a Gnuplot plot as a PostScript file
     # to save the current plot as a postscript file issue the commands:
     #  gnuplot&gt;   load 'saveplot'
     #  gnuplot&gt;   !mv my-plot.ps another-file.ps
     set size 1.0, 0.6
     set terminal postscript portrait enhanced mono dashed lw 1 "Helvetica" 14 
     set output "my-plot.ps"
     replot
     set terminal x11
     set size 1,1

</pre>

Then simply type the following commands to create and print the plot

<pre>      gnuplot&gt; load 'save.plt'
      gnuplot&gt; !mv my-plot.ps force.ps
      gnuplot&gt; !lpr force.ps
</pre>

The PostScript files produced by Gnuplot may be read and edited
with a text editor.   The PostScript file format convention 
used by Gnuplot is described in 
<a href="http://www.duke.edu/%7Ehpgavin/gp-ps.txt">this document</a> by Richard Crawford.  

<hr>
<p>
<b>12. ADVANCED COMPUTATION AND VISUALIZATION                        </b>

</p><p>
Gnuplot is used for plotting in a free and open 
<a href="http://www.duke.edu/%7Ehpgavin/matlab.html">Matlab</a>-like
programming environment called <a href="http://www.octave.org/">Octave</a>.
</p>

<hr>
<p>
<b>13. PRINTING TWO FIGURES ON ONE PAGE                              </b>

</p><p>
If you would like two figures to be laser-printed on the same page,
you may use the following shell script.  Create file  cat2  , below,
and make the file executable by typing:   unix%  chmod +x cat2

</p><pre>      # cat2: Shell script for putting two Gnuplot plots on one page
      echo %! &gt; g.ps
      echo gsave &gt;&gt; g.ps 
      echo 0 400 translate &gt;&gt; g.ps                  # for Gnuplot plots
      cat $1 | sed -e "s/showpage//" &gt;&gt; g.ps 
      echo grestore &gt;&gt; g.ps 
      echo gsave &gt;&gt; g.ps 
      echo 0 090 translate &gt;&gt; g.ps                  # for Gnuplot plots
      cat $2 &gt;&gt; g.ps 
      lpr -Phudsonlp1 g.ps
</pre>

<p>
To combine two PostScript figures (plot1.ps  and   plot2.ps) on one page:
</p><pre>            cat2  plot1.ps  plot2.ps                     
</pre>

<hr>


<font face="Verdana, Arial" size="2">
© 2000-2008 Henri P. Gavin<br>
updated: 12-18-2002; 10-11-2004; 12-5-2006; 12-8-2006; 3-30-2007; 12-10-2008
</font><br>
<a href="http://www.jerrywang.net/vi/"><img src="gnuplot-gavin_files/vi_logo_by_urmas_reinsalu.png" border="0"></a>



</body></html>